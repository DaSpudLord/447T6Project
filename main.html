<!DOCTYPE html>



<html lang="en">
	<head>
		<title>COVID Map</title>
		<meta charset="utf-8">

		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
			  integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
			  crossorigin="" />
		<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
				integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
				crossorigin=""></script>

		<link rel="stylesheet" href="styles.css" />
		<script src="scripts.js"></script>

		<style>
			html, body {
				height: 100%; /* This makes the page conform to the user's vertical screen space */
				max-height: 100%;
				font-family: Arial, Helvetica, sans-serif
			}
			body {
				margin: 0px;
				display: flex; /* Making the body into a vertical flexbox allows the height of the page-content to fit the screen size */
				flex-direction: column;
				align-items: stretch;
			}
			.header {
				min-height: min-content; /* Header has a fixed height */
				flex: 0;
				border-bottom: 1px solid black;
			}
			.page-content {
				min-height: 0; /* This prevents the page content from overflowing its container and making the entire page scroll
					(possible if the sidebar's content overflows the sidebar). I have no fucking idea why this works but it does */
				flex: 1; /* Page content takes up all vertical space not being used by the header */
				display: flex;
				flex-direction: row; /* The page content is itself a (horizontal) flexbox consisting of the map and the sidebar */
				align-items: stretch;
			}
			.leafmap {
				height: 100%;
				flex: 3; /* The leafmap will take up approx 3/4ths of the horizontal space of the page */
			}
			.leafmap-sidebar {
				height: 100%;
				min-width: 350px; /* Don't let the sidebar shrink too much, TODO: Replace with min-content once the sidebar has stuff in it? */
				flex: 1; /* The sidebar will take up approx 1/4ths of the horizontal space of the page */
				border-left: 1px solid black;
				overflow: auto; /* If the sidebar's content overflows the sidebar,
					make a scrollbar localized to the sidebar rather than making the entire page scroll */
			}
		</style>
	</head>
	
	<body>
		<!-- Header -->
		<nav class="header">
			<h1 style="margin:12px">COVID-19 Data Map</h1>
			<!-- This is where the title, navbar, and related stuff can go -->
		</nav>

		<!-- PAGE CONTENT -->
		<div class="page-content">
			<!-- The actual map -->
			<div id="map-main" class="leafmap"></div>

			<!-- The right info panel -->
			<div class="leafmap-sidebar">
				<h1 id="region-title" style="margin:12px">Maryland</h1> <!-- TODO: Set with code -->

				<div class="tab-bar">
					<button hidden>&lt;</button> <!-- TODO: This button currently does nothing -->
					<button class="tab-active" onclick="tabClickSelect(this, 'tab-content', 'tab-stats')">Statistics</button>
					<button onclick="tabClickSelect(this, 'tab-content', 'tab-list')">List of Counties</button> <!-- TODO: Set to "List of States" or "List of Counties" with code -->
					<div></div> <!-- empty div lets me do fancy stuff with borders teehee -->
				</div>

				<div id="tab-stats" class="tab-content">
					<!-- TODO: Set these stats in code -->
					<p style="margin:12px">Last updated <span id="stats-date">N/E/VER</span></p>
					<p style="margin:16px;margin-top:0;font-size:20px;line-height:150%">
						Cases: <span id="stats-cases">4321</span><br />
						Deaths: <span id="stats-deaths">1234</span><br />
						Vaccinations: <span id="stats-vaccinations">-66</span>
					</p>
				</div>

				<div id="tab-list" class="tab-content" hidden>
					<div style="margin:8px">
						<label>
							Sort By:
							<select id="sort-by">
								<option value="name">Name</option>
								<option value="cases">Cases</option>
								<option value="deaths">Deaths</option>
								<option value="vaccinations">Vaccinations</option>
							</select>
						</label>
						<label style="border-left:1px solid black"><input type="checkbox" id="sort-descending" checked />Descending Order</label>
					</div>

					<div id="region-list" class="button-list">
						<!-- TEMPLATE LIST ITEM - This is captured as a template by the js
							 and cloned to make all the actual list elements -->
						<button>
							<p class="region-list-name" style="margin:0"></p>
							<div style="flex:1"></div>
							<p class="region-list-data" style="margin:0"></p>
						</button>
					</div>
				</div>
			</div>
		</div>
		
		<script>
			var map_main = L.map("map-main").setView([39.0458, -76.6413], 8); // TODO: Maybe replace this setView with something not-hardcoded

			L.control.layers(
				{
					"Streets": getMapboxTiles("streets-v11").addTo(map_main), // This one's the default
					"Outdoors": getMapboxTiles("outdoors-v11"),
					"Light": getMapboxTiles("light-v10"),
					"Dark": getMapboxTiles("dark-v10"),
					"Satellite": getMapboxTiles("satellite-v9"),
					"Satellite Streets": getMapboxTiles("satellite-streets-v11"),
					"Navigation Day": getMapboxTiles("navigation-day-v1"),
					"Navigation Night": getMapboxTiles("navigation-night-v1"),
				}).addTo(map_main);

			// TEMPLATE LIST ITEM - make clones with REGION_LIST_TEMPLATE.cloneNode(true)
			const REGION_LIST_TEMPLATE = document.getElementById("region-list").firstElementChild;
			REGION_LIST_TEMPLATE.remove();

			// Example of setting region list
			let region_list = document.getElementById("region-list");
			removeAllChildren(region_list); // First, clear existing children (optional)

			let item = REGION_LIST_TEMPLATE.cloneNode(true); // Make a copy
			item.getElementsByClassName("region-list-name")[0].innerHTML = "Anne Arundel County"; // Set its text
			item.getElementsByClassName("region-list-data")[0].innerHTML = "Cases: 420";
			region_list.appendChild(item); // Add it to the list

			item = REGION_LIST_TEMPLATE.cloneNode(true);
			item.getElementsByClassName("region-list-name")[0].innerHTML = "Howard County";
			item.getElementsByClassName("region-list-data")[0].innerHTML = "Cases: 69";
			region_list.appendChild(item);
		</script>
	</body>
</html>